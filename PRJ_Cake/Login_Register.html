<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SweetDay Cakes | Đăng nhập / Đăng ký</title>
  <meta name="description" content="Đăng nhập, đăng ký tài khoản và quên mật khẩu cho cửa hàng bánh SweetDay." />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { theme: { extend: { fontFamily: { sans: ["Plus Jakarta Sans","system-ui","-apple-system","Segoe UI","Roboto","Noto Sans","sans-serif"] }, colors: { primary: {50:'#EFF8FF',100:'#DBEDFF',200:'#BFE1FF',300:'#93CEFF',400:'#63B6FF',500:'#3BA0FF',600:'#2188EE',700:'#1A73D6',800:'#195CAB',900:'#154C8B'}, cream:'#FFF7F1', choco:'#6B4F4F', strawberry:'#FF6B6B', mint:'#B7F0E3' }, boxShadow:{ soft:'0 10px 25px -10px rgba(30,64,175,.25)'} } } }
  </script>
  <script defer src="https://unpkg.com/lucide@latest"></script>
  <style>html{scroll-behavior:smooth} :focus-visible{outline:2px solid #3BA0FF; outline-offset:2px}</style>
</head>
<body class="bg-primary-50 text-slate-800">
  <!-- Header -->
  <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-primary-100">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between gap-3">
      <a href="index.html" class="flex items-center gap-2">
        <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl bg-primary-100 text-primary-700 shadow-soft"><i data-lucide="user-round" class="w-5 h-5"></i></span>
        <span class="text-lg font-extrabold text-primary-700">Tài khoản</span>
      </a>
      <nav class="flex items-center gap-2">
        <a href="shop.html" class="p-2 rounded-xl hover:bg-primary-100"><i data-lucide="store" class="w-5 h-5"></i></a>
        <a href="cart.html" class="p-2 rounded-xl hover:bg-primary-100"><i data-lucide="shopping-bag" class="w-5 h-5"></i></a>
      </nav>
    </div>
  </header>

  <!-- Main -->
  <main class="container mx-auto px-4 py-8 grid lg:grid-cols-12 gap-6">
    <!-- Left: Intro -->
    <section class="lg:col-span-5">
      <div class="rounded-3xl border border-primary-200 bg-white p-6">
        <div class="inline-flex h-12 w-12 items-center justify-center rounded-2xl bg-primary-100 text-primary-700 shadow-soft">
          <i data-lucide="cake" class="w-6 h-6"></i>
        </div>
        <h1 class="mt-3 text-2xl md:text-3xl font-extrabold text-slate-900">Chào mừng trở lại SweetDay</h1>
        <p class="mt-1 text-slate-600">Tạo tài khoản để quản lý đơn hàng, lưu địa chỉ, wishlist và ưu đãi riêng.</p>
        <ul class="mt-4 space-y-2 text-sm text-slate-700">
          <li class="flex items-center gap-2"><i data-lucide="badge-check" class="w-4 h-4 text-primary-600"></i> Theo dõi tình trạng đơn nhanh chóng</li>
          <li class="flex items-center gap-2"><i data-lucide="heart" class="w-4 h-4 text-primary-600"></i> Lưu bánh yêu thích và nhắc sinh nhật</li>
          <li class="flex items-center gap-2"><i data-lucide="wallet" class="w-4 h-4 text-primary-600"></i> Thanh toán nhanh hơn lần sau</li>
        </ul>
      </div>
      <div class="mt-4 rounded-3xl border border-primary-200 bg-white p-6">
        <h3 class="font-semibold text-slate-900">Chưa có tài khoản doanh nghiệp?</h3>
        <p class="text-sm text-slate-600">Liên hệ để kích hoạt giá sỉ & xuất hoá đơn VAT.</p>
        <a href="contact.html" class="inline-flex items-center gap-2 mt-3 rounded-2xl bg-white text-primary-700 ring-1 ring-primary-200 px-4 py-2 text-sm font-semibold hover:bg-primary-50"><i data-lucide="phone" class="w-4 h-4"></i> Liên hệ</a>
      </div>
    </section>

    <!-- Right: Auth cards -->
    <section class="lg:col-span-7 grid gap-4">
      <!-- Tabs -->
      <div class="rounded-3xl border border-primary-200 bg-white p-2 flex gap-2">
        <button id="tabLogin" class="flex-1 px-4 py-2 rounded-2xl text-sm font-semibold bg-primary-600 text-white">Đăng nhập</button>
        <button id="tabRegister" class="flex-1 px-4 py-2 rounded-2xl text-sm font-semibold hover:bg-primary-100">Đăng ký</button>
        <button id="tabForgot" class="flex-1 px-4 py-2 rounded-2xl text-sm font-semibold hover:bg-primary-100">Quên mật khẩu</button>
      </div>

      <!-- Login -->
      <div id="panelLogin" class="rounded-3xl border border-primary-200 bg-white p-6">
        <h2 class="text-lg font-bold text-slate-900">Đăng nhập</h2>
        <form id="formLogin" class="mt-3 grid gap-3">
          <div>
            <label class="block text-sm font-semibold text-slate-900">Email hoặc SĐT</label>
            <input id="loginId" type="text" class="mt-1 w-full rounded-2xl border border-primary-200 px-4 py-3 text-sm" placeholder="you@example.com hoặc 09xx xxx xxx" required />
          </div>
          <div>
            <label class="block text-sm font-semibold text-slate-900">Mật khẩu</label>
            <div class="relative">
              <input id="loginPass" type="password" class="mt-1 w-full rounded-2xl border border-primary-200 px-4 py-3 text-sm pr-10" required />
              <button type="button" data-toggle-pass="#loginPass" class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-500"><i data-lucide="eye"></i></button>
            </div>
          </div>
          <div class="flex items-center justify-between text-sm">
            <label class="inline-flex items-center gap-2"><input id="remember" type="checkbox" class="rounded"> Ghi nhớ tôi</label>
            <button type="button" id="goForgot" class="text-primary-700 underline">Quên mật khẩu?</button>
          </div>
          <button class="mt-1 inline-flex items-center justify-center gap-2 rounded-2xl bg-primary-600 text-white px-5 py-3 font-semibold hover:bg-primary-700"><i data-lucide="log-in" class="w-5 h-5"></i> Đăng nhập</button>
        </form>
        <div class="mt-3 grid sm:grid-cols-2 gap-2">
          <button disabled class="rounded-2xl bg-white text-slate-600 ring-1 ring-primary-200 px-4 py-3 text-sm font-semibold"><i data-lucide="facebook" class="w-4 h-4"></i> Facebook (sắp có)</button>
          <button disabled class="rounded-2xl bg-white text-slate-600 ring-1 ring-primary-200 px-4 py-3 text-sm font-semibold"><i data-lucide="mail" class="w-4 h-4"></i> Google (sắp có)</button>
        </div>
      </div>

      <!-- Register -->
      <div id="panelRegister" class="hidden rounded-3xl border border-primary-200 bg-white p-6">
        <h2 class="text-lg font-bold text-slate-900">Đăng ký tài khoản</h2>
        <form id="formRegister" class="mt-3 grid gap-3">
          <div class="grid md:grid-cols-2 gap-3">
            <div>
              <label class="block text-sm font-semibold text-slate-900">Họ tên *</label>
              <input id="regName" type="text" class="mt-1 w-full rounded-2xl border border-primary-200 px-4 py-3 text-sm" required />
            </div>
            <div>
              <label class="block text-sm font-semibold text-slate-900">Số điện thoại *</label>
              <input id="regPhone" type="tel" class="mt-1 w-full rounded-2xl border border-primary-200 px-4 py-3 text-sm" placeholder="09xx xxx xxx" required />
            </div>
          </div>
          <div>
            <label class="block text-sm font-semibold text-slate-900">Email *</label>
            <input id="regEmail" type="email" class="mt-1 w-full rounded-2xl border border-primary-200 px-4 py-3 text-sm" placeholder="you@example.com" required />
          </div>
          <div>
            <label class="block text-sm font-semibold text-slate-900">Mật khẩu *</label>
            <div class="relative">
              <input id="regPass" type="password" class="mt-1 w-full rounded-2xl border border-primary-200 px-4 py-3 text-sm pr-10" placeholder="Ít nhất 8 ký tự" required />
              <button type="button" data-toggle-pass="#regPass" class="absolute right-3 top-1/2 -translate-y-1/2 text-slate-500"><i data-lucide="eye"></i></button>
            </div>
            <div id="passMeter" class="mt-1 text-xs"></div>
          </div>
          <div class="grid md:grid-cols-2 gap-3">
            <div>
              <label class="block text-sm font-semibold text-slate-900">Địa chỉ (tuỳ chọn)</label>
              <input id="regAddress" type="text" class="mt-1 w-full rounded-2xl border border-primary-200 px-4 py-3 text-sm" placeholder="Số nhà, đường, phường/xã, quận/huyện" />
            </div>
            <div>
              <label class="block text-sm font-semibold text-slate-900">Thành phố</label>
              <input id="regCity" type="text" class="mt-1 w-full rounded-2xl border border-primary-200 px-4 py-3 text-sm" placeholder="TP.HCM, Hà Nội…" />
            </div>
          </div>
          <label class="inline-flex items-center gap-2 text-sm text-slate-700"><input id="regAgree" type="checkbox" class="rounded"> Tôi đồng ý với <a href="policies-terms.html" class="text-primary-700 underline">Điều khoản & Điều kiện</a>.</label>
          <button class="mt-1 inline-flex items-center justify-center gap-2 rounded-2xl bg-primary-600 text-white px-5 py-3 font-semibold hover:bg-primary-700"><i data-lucide="user-round-plus" class="w-5 h-5"></i> Tạo tài khoản</button>
        </form>
      </div>

      <!-- Forgot -->
      <div id="panelForgot" class="hidden rounded-3xl border border-primary-200 bg-white p-6">
        <h2 class="text-lg font-bold text-slate-900">Quên mật khẩu</h2>
        <form id="formForgot" class="mt-3 grid gap-3">
          <div>
            <label class="block text-sm font-semibold text-slate-900">Email *</label>
            <input id="fpEmail" type="email" class="mt-1 w-full rounded-2xl border border-primary-200 px-4 py-3 text-sm" placeholder="you@example.com" required />
          </div>
          <button class="inline-flex items-center justify-center gap-2 rounded-2xl bg-primary-600 text-white px-5 py-3 font-semibold hover:bg-primary-700"><i data-lucide="send" class="w-5 h-5"></i> Gửi link đặt lại mật khẩu</button>
        </form>
        <div id="fpInfo" class="mt-3 text-sm text-primary-700 hidden">Đã gửi link đặt lại mật khẩu (demo). Vui lòng kiểm tra email.</div>
      </div>
    </section>
  </main>

  <!-- Toast -->
  <div id="toast" class="fixed left-1/2 -translate-x-1/2 bottom-6 z-50 hidden">
    <div class="rounded-2xl bg-slate-900 text-white px-4 py-3 text-sm shadow-xl flex items-center gap-2">
      <i data-lucide="info" class="w-4 h-4 text-mint"></i>
      <span id="toastMsg">Thông báo</span>
    </div>
  </div>

  <script>
    const $ = (s, r=document)=> r.querySelector(s);
    const $$ = (s, r=document)=> Array.from(r.querySelectorAll(s));
    const toast = (m)=>{ $('#toastMsg').textContent=m; $('#toast').classList.remove('hidden'); setTimeout(()=>$('#toast').classList.add('hidden'),1500); };

    // Simple mock auth using localStorage
    const KEY_USER = 'auth.user'; // { id, name, email, phone, address, city, createdAt }
    const KEY_SESSION = 'auth.session'; // { email, remember }

    function currentUser(){ try{return JSON.parse(localStorage.getItem(KEY_USER)||'null');}catch{return null;} }
    function saveUser(u){ localStorage.setItem(KEY_USER, JSON.stringify(u)); }

    function switchTab(which){
      const tabs = { login:['#tabLogin','#panelLogin'], reg:['#tabRegister','#panelRegister'], fp:['#tabForgot','#panelForgot'] };
      Object.values(tabs).forEach(([tb,p])=>{ $(tb).classList.remove('bg-primary-600','text-white'); $(p).classList.add('hidden'); });
      const [tb,p] = which==='reg'? tabs.reg : which==='fp'? tabs.fp : tabs.login;
      $(tb).classList.add('bg-primary-600','text-white'); $(p).classList.remove('hidden');
    }

    function validatePhone(v){ return /^0\d{9,10}$/.test(v.trim()); }
    function passScore(p){ let s=0; if(p.length>=8) s++; if(/[A-Z]/.test(p)) s++; if(/[a-z]/.test(p)) s++; if(/\d/.test(p)) s++; if(/[^\w]/.test(p)) s++; return s; }

    function init(){
      // toggle pass
      $$('[data-toggle-pass]').forEach(btn=> btn.addEventListener('click', ()=>{ const sel=btn.getAttribute('data-toggle-pass'); const ip=$(sel); ip.type = ip.type==='password'? 'text':'password'; }));

      // Tab buttons
      $('#tabLogin').addEventListener('click', ()=> switchTab('login'));
      $('#tabRegister').addEventListener('click', ()=> switchTab('reg'));
      $('#tabForgot').addEventListener('click', ()=> switchTab('fp'));
      $('#goForgot').addEventListener('click', ()=> switchTab('fp'));

      // Pass strength
      $('#regPass').addEventListener('input', e=>{
        const s = passScore(e.target.value); const labels=['Rất yếu','Yếu','Trung bình','Khá','Mạnh'];
        $('#passMeter').innerHTML = `<div class='h-1.5 rounded bg-primary-100 overflow-hidden'><div style='width:${(s/5)*100}%' class='h-1.5 bg-primary-600'></div></div><div class='mt-1 text-slate-600'>Độ mạnh: <b>${labels[s-1]||'—'}</b></div>`;
      });

      // Register submit
      $('#formRegister').addEventListener('submit', e=>{
        e.preventDefault();
        const name=$('#regName').value.trim(); const phone=$('#regPhone').value.trim(); const email=$('#regEmail').value.trim().toLowerCase(); const pass=$('#regPass').value; const address=$('#regAddress').value.trim(); const city=$('#regCity').value.trim(); const agree=$('#regAgree').checked;
        if(!agree){ toast('Bạn cần đồng ý Điều khoản'); return; }
        if(!validatePhone(phone)){ toast('SĐT không hợp lệ'); return; }
        if(pass.length<8){ toast('Mật khẩu tối thiểu 8 ký tự'); return; }
        const user = { id: 'U'+Date.now(), name, phone, email, pass, address, city, createdAt: new Date().toISOString() };
        saveUser(user);
        localStorage.setItem(KEY_SESSION, JSON.stringify({ email, remember:true }));
        toast('Đăng ký thành công!');
        setTimeout(()=> location.href='account.html', 600);
      });

      // Login submit
      $('#formLogin').addEventListener('submit', e=>{
        e.preventDefault();
        const id=$('#loginId').value.trim(); const pass=$('#loginPass').value; const remember=$('#remember').checked;
        const u=currentUser();
        if(!u){ toast('Chưa có tài khoản. Vui lòng đăng ký.'); switchTab('reg'); return; }
        const ok = (id===u.email || id===u.phone) && pass===u.pass;
        if(!ok){ toast('Thông tin đăng nhập chưa đúng'); return; }
        localStorage.setItem(KEY_SESSION, JSON.stringify({ email:u.email, remember }));
        toast('Đăng nhập thành công'); setTimeout(()=> location.href='account.html', 500);
      });

      // Forgot submit (mock)
      $('#formForgot').addEventListener('submit', e=>{ e.preventDefault(); $('#fpInfo').classList.remove('hidden'); toast('Đã gửi email đặt lại (demo)'); });

      // If already logged in, redirect
      try{
        const s = JSON.parse(localStorage.getItem(KEY_SESSION)||'null'); const u=currentUser();
        if(s && u && s.email===u.email){ location.href='account.html'; return; }
      }catch{}

      if(window.lucide) window.lucide.createIcons();
    }

    window.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
